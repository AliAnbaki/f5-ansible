---

#- name: Create HTTP iApp template
#  bigip_iapp_template:
#      content: "{{ lookup('file', 'f5.http.v1.2.0rc4.tmpl') }}"
#      password: "{{ bigip_password }}"
#      server: "{{ inventory_hostname }}"
#      server_port: "{{ bigip_port }}"
#      user: "{{ bigip_username }}"
#      validate_certs: "{{ validate_certs }}"
#  register: result

- name: Create HTTP iApp service from iApp template
  bigip_iapp_service:
      name: "fooServer"
      template: "f5.http"
      parameters: "{{ lookup('file', 'f5.http.parameters.json') }}"
      password: "{{ bigip_password }}"
      server: "{{ inventory_hostname }}"
      server_port: "{{ bigip_port }}"
      user: "{{ bigip_username }}"
      validate_certs: "{{ validate_certs }}"
  register: result
