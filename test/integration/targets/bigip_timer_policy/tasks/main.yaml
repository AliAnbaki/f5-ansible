---

- import_tasks: setup.yaml

- name: Create a timer policy
  bigip_timer_policy:
    name: timer1
    description: my description
  register: result

- name: Assert Create a timer policy
  assert:
    that:
      - result is changed

- name: Create a timer policy - Idempotent check
  bigip_timer_policy:
    name: timer1
    description: my description
  register: result

- name: Assert Create a timer policy - Idempotent check
  assert:
    that:
      - result is not changed

- name: Change the description
  bigip_timer_policy:
    name: timer1
    description: another description
  register: result

- name: Assert Change the description
  assert:
    that:
      - result is changed

- name: Change the description - Idempotent check
  bigip_timer_policy:
    name: timer1
    description: another description
  register: result

- name: Assert Change the description - Idempotent check
  assert:
    that:
      - result is not changed

- name: Remove the timer policy
  bigip_timer_policy:
    name: timer1
    state: absent
  register: result

- name: Assert Remove the timer policy
  assert:
    that:
      - result is changed

- name: Remove the timer policy - Idempotent check
  bigip_timer_policy:
    name: timer1
    state: absent
  register: result

- name: Assert Remove the timer policy - Idempotent check
  assert:
    that:
      - result is not changed

- import_tasks: teardown.yaml
